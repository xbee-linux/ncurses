schema-version: 1.0

type: builder


const:
  srcDir: /usr/src
  exportDir: /opt/ncurses


var:
  version: "6.2"

dependency: pkg-config

provision:
  - url:
      from: https://ftp.gnu.org/gnu/ncurses/ncurses-{% version %}.tar.gz
      todir: "{% srcDir %}"


build:
  - shell:
      cmds:
        - ./configure --prefix=/usr --mandir=/usr/share/man --with-shared --without-debug --without-normal --enable-pc-files --enable-widec
        - make
        - make install DESTDIR={% exportDir %}
      directory: "{% srcDir %}/ncurses-{% version %}"
  - shell:
      template: postinstall.sh
      directory: "{% srcDir %}/ncurses-{% version %}"

  - export: "{% exportDir %}"

